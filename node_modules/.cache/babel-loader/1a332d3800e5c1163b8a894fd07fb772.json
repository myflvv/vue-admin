{"remainingRequest":"/home/nothing/data/vue/mall-vue3-manage/node_modules/babel-loader/lib/index.js!/home/nothing/data/vue/mall-vue3-manage/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nothing/data/vue/mall-vue3-manage/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nothing/data/vue/mall-vue3-manage/src/views/Login.vue","mtime":1615423561122},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/cache-loader/dist/cjs.js","mtime":1589968278364},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/babel-loader/lib/index.js","mtime":1614068612755},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/cache-loader/dist/cjs.js","mtime":1589968278364},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js","mtime":1614935255022}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvbm90aGluZy9kYXRhL3Z1ZS9tYWxsLXZ1ZTMtbWFuYWdlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL25vdGhpbmcvZGF0YS92dWUvbWFsbC12dWUzLW1hbmFnZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgb25CZWZvcmVNb3VudCwgcmVhY3RpdmUsIHJlZiwgdG9SZWZzLCB1bnJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gJ0AvYXBpL3NlcnZpY2VBcGknOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXBsdXMiOwppbXBvcnQgVnVlSW1nVmVyaWZ5IGZyb20gJ0AvY29tcG9uZW50cy9WdWVJbWFnZVZlcmlmeSc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgdmFyIHZhbGlkYXRlRm9ybSA9IHJlZihudWxsKTsKICAgIHZhciB2ZXJpZnlSZWYgPSByZWYobnVsbCk7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIGxvZ2luOiB7CiAgICAgICAgaGVpZ2h0OiAnJywKICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoJyArIHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlL2xvZ2luX2JqLnBuZycpICsgJyknCiAgICAgIH0sCiAgICAgIGxvZ29JbWc6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlL2xvZ28ucG5nJyksCiAgICAgIGxvZ2luRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgaW1nQ29kZTogJycKICAgICAgfQogICAgfSk7CiAgICB2YXIgcnVsZXMgPSB7CiAgICAgIHVzZXJuYW1lOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfnlKjmiLflkI3np7DkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+WvhueggeS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBpbWdDb2RlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfpqozor4HnoIHkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XQogICAgfTsKICAgIG9uQmVmb3JlTW91bnQoZnVuY3Rpb24gKCkgewogICAgICBzdGF0ZS5sb2dpbi5oZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCArICJweCI7CiAgICB9KTsKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGZvcm0sIF9pbWdDb2RlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBmb3JtID0gdW5yZWYodmFsaWRhdGVGb3JtKTsKCiAgICAgICAgICAgICAgICBpZiAoZm9ybSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGZvcm0udmFsaWRhdGUoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgLy8g5qCh6aqM6aqM6K+B56CBCiAgICAgICAgICAgICAgICBfaW1nQ29kZSA9IHZlcmlmeVJlZi52YWx1ZS5pbWdDb2RlIHx8ICcnOwoKICAgICAgICAgICAgICAgIGlmICghKF9pbWdDb2RlLnRvTG93ZXJDYXNlKCkgIT0gc3RhdGUubG9naW5Gb3JtLmltZ0NvZGUudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+mqjOivgeeggeacieivr++8jOivt+mHjeaWsOi+k+WFpSEnLAogICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0ZS5sb2dpbkZvcm0pOwogICAgICAgICAgICAgICAgbG9naW4oc3RhdGUubG9naW5Gb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAvLyDnmbvlvZXmiJDlip/lkI7orr7nva50b2tlbuWIsHZ1ZXjkuK0KICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudXNlcm5hbWUgPSByZXMuZGF0YS51c2VybmFtZTsKICAgICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldFRva2VuJywgcmVzLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ICdob21lJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvUmVmcyhzdGF0ZSkpLCB7fSwgewogICAgICBydWxlczogcnVsZXMsCiAgICAgIHZhbGlkYXRlRm9ybTogdmFsaWRhdGVGb3JtLAogICAgICB2ZXJpZnlSZWY6IHZlcmlmeVJlZiwKICAgICAgc3VibWl0OiBzdWJtaXQKICAgIH0pOwogIH0sCiAgY29tcG9uZW50czogewogICAgVnVlSW1nVmVyaWZ5OiBWdWVJbWdWZXJpZnkKICB9Cn07"},{"version":3,"sources":["/home/nothing/data/vue/mall-vue3-manage/src/views/Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"login\" :style=\"login\">\n        <el-row :gutter=\"10\" class=\"login-container\">\n            <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"validateForm\" label-width=\"1em\" class=\"login-body\"\n                     hide-required-asterisk=\"false\">\n                <el-image class=\"login-logo\" :src=\"logoImg\"></el-image>\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"loginForm.username\" prefix-icon=\"el-icon-user\" placeholder=\"请输入用户名称\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type=\"password\" v-model=\"loginForm.password\" prefix-icon=\"el-icon-lock\" show-password\n                              placeholder=\"请输入密码\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"imgCode\">\n                    <el-row>\n                        <el-col :span=\"14\">\n                            <el-input v-model=\"loginForm.imgCode\" prefix-icon=\"el-icon-message\"\n                                      placeholder=\"请输入验证码\"></el-input>\n                        </el-col>\n                        <el-col :span=\"9\" :offset=\"1\">\n                            <VueImgVerify ref=\"verifyRef\"></VueImgVerify>\n                        </el-col>\n                    </el-row>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"text\">忘记密码？</el-button>\n                </el-form-item>\n                <el-form-item class=\"login-body-button\">\n                    <el-button class=\"login-submit\" type=\"danger\" round @click=\"submit\">登录</el-button>\n                </el-form-item>\n            </el-form>\n        </el-row>\n    </div>\n</template>\n\n<script>\n    import {onBeforeMount, reactive, ref, toRefs, unref} from \"vue\"\n    import {useRouter} from 'vue-router'\n    import {useStore} from 'vuex'\n    import {login} from '@/api/serviceApi'\n    import {ElMessage} from \"element-plus\"\n    import VueImgVerify from '@/components/VueImageVerify'\n\n    export default {\n        setup() {\n            const router = useRouter()\n            const store = useStore()\n            const validateForm = ref(null)\n            const verifyRef = ref(null)\n            const state = reactive({\n                login: {\n                    height: '',\n                    backgroundImage: 'url(' + require('@/assets/image/login_bj.png') + ')'\n                },\n                logoImg: require('@/assets/image/logo.png'),\n                loginForm: {\n                    username: '',\n                    password: '',\n                    imgCode: ''\n                },\n            })\n\n            const rules = {\n                username: [\n                    {required: true, message: '用户名称不能为空', trigger: 'blur'}\n                ],\n                password: [\n                    {required: true, message: '密码不能为空', trigger: 'blur'}\n                ],\n                imgCode: [\n                    {required: true, message: '验证码不能为空', trigger: 'blur'}\n                ]\n            }\n\n            onBeforeMount(() => {\n                state.login.height = document.body.clientHeight + \"px\"\n            })\n\n            const submit = async () => {\n                const form = unref(validateForm)\n                if (!form) {\n                    return\n                }\n                await form.validate()\n\n                // 校验验证码\n                const _imgCode = verifyRef.value.imgCode || ''\n                if (_imgCode.toLowerCase() != state.loginForm.imgCode.toLowerCase()) {\n                    ElMessage({showClose: true, message: '验证码有误，请重新输入!', type: 'error'})\n                    return\n                }\n\n                console.log(state.loginForm)\n\n                login(state.loginForm).then(res => {\n                    if (res.code === 200) {\n                        // 登录成功后设置token到vuex中\n                        localStorage.username = res.data.username\n                        store.commit('setToken', res.data.token)\n                        router.push({path: 'home'})\n                    } else {\n                        ElMessage({showClose: true, message: res.data, type: 'error'})\n                    }\n                })\n            }\n\n            return {\n                ...toRefs(state),\n                rules,\n                validateForm,\n                verifyRef,\n                submit,\n            }\n        },\n        components: {\n            VueImgVerify\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    .login {\n        background-size: cover;\n\n        .login-logo {\n            width: 120px;\n            height: 120px;\n            display: block;\n            margin: 2rem auto;\n        }\n\n        .login-container {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            background: rgba(233, 233, 233, 0.3);\n            border-radius: 0.4rem;\n            border: 1px white solid;\n            padding: 0.8rem;\n        }\n\n        .login-body {\n            padding: 1rem 2rem;\n            background: rgba(233, 233, 233, 0.6);\n            width: 25rem;\n            border-radius: 0.2rem;\n        }\n\n        .el-input__inner {\n            border-radius: 20px;\n        }\n\n        .codeImg {\n            height: 40px;\n        }\n\n        .login-submit {\n            width: 100%;\n        }\n    }\n</style>"],"sourceRoot":""}]}