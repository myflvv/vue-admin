{"remainingRequest":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nothing/data/vue/mall-vue3-manage/src/views/Master.vue?vue&type=style&index=0&id=b88187c8&lang=less","dependencies":[{"path":"/home/nothing/data/vue/mall-vue3-manage/src/views/Master.vue","mtime":1616489840738},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/css-loader/dist/cjs.js","mtime":1614068612826},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1614935255022},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/postcss-loader/src/index.js","mtime":1589968283242},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/less-loader/dist/cjs.js","mtime":1615423661887},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/cache-loader/dist/cjs.js","mtime":1589968278364},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js","mtime":1614935255022}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4uL2NvbW1vbi9zdHlsZS9jb21tb24iOwoKLmdvb2RzLWxpc3QgewogIC5jb250ZW50LW1haW4gewogICAgLnRhYmxlLWltYWdlIHsKICAgICAgd2lkdGg6IDQ1cHg7CiAgICAgIGhlaWdodDogNDVweDsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["/home/nothing/data/vue/mall-vue3-manage/src/views/Master.vue"],"names":[],"mappings":";AAsYA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEhC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACd;EACF;AACF","file":"/home/nothing/data/vue/mall-vue3-manage/src/views/Master.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"goods-list\">\n    <el-card shadow=\"never\">\n      <div class=\"content\">\n        <div class=\"content-header\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"4\">\n              <el-input v-model=\"keyword\" placeholder=\"请输入商品信息\"></el-input>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-select v-model=\"typeVal\" filterable placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in types\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                />\n              </el-select>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-button type=\"danger\" @click=\"init\">搜索</el-button>\n            </el-col>\n          </el-row>\n        </div>\n        <div class=\"content-main\">\n          <el-tabs v-model=\"activeName\">\n            <el-tab-pane label=\"收款主体\" name=\"first\">\n              <template #label>\n                <span>收款主体</span>\n              </template>\n              <el-button\n                type=\"primary\"\n                @click=\"openDialog\"\n                style=\"float:right;margin-bottom: 10px;\"\n              >新增</el-button>\n              <Table\n                :datas=\"data\"\n                v-if=\"data.tableData.length\"\n                :index=\"false\"\n                :operation=\"operation\"\n                :loading=\"loading\"\n                empty-text=\"暂无数据\"\n                @edit=\"edit\"\n              ></Table>\n            </el-tab-pane>\n            <el-tab-pane label=\"支付产品\" name=\"second\">\n              <template #label>\n                <span>支付产品</span>\n              </template>\n              <el-button\n                type=\"primary\"\n                @click=\"openProDialog\"\n                style=\"float:right;margin-bottom: 10px;\"\n              >新增</el-button>\n            </el-tab-pane>\n          </el-tabs>\n        </div>\n      </div>\n    </el-card>\n\n    <el-dialog :title=\"dialogTitle\" v-model=\"dialogFormVisible\" width=\"30%\">\n      <el-form :model=\"form\" label-width=\"150px\" :rules=\"rules\" ref=\"formRef\" status-icon>\n        <el-form-item label=\"收款主体公司编码\" prop=\"code\">\n          <el-input v-model=\"form.code\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"收款主体公司名称\" prop=\"company\">\n          <el-input v-model=\"form.company\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"id\" hidden>\n          <el-input v-model=\"form.id\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"resetForm\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"submitForm('formRef')\">确 定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n\n\n     <el-dialog :title=\"dialogTitlePro\" v-model=\"dialogFormVisiblePro\" width=\"40%\">\n      <el-form :model=\"formPro\" label-width=\"150px\" :rules=\"rulesPro\" ref=\"formRefPro\" status-icon>\n         <el-form-item label=\"收款主体公司名称\" prop=\"alipayselect\">\n                    <el-select v-model=\"formPro.alipayselect\" placeholder=\"请选择\">\n                        <el-option\n                                v-for=\"item in formPro.alioptions\"\n                                :key=\"item.value\"\n                                :label=\"item.label\"\n                                :value=\"item.value\">\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n        <el-form-item label=\"支付方式\">\n                         <el-radio-group v-model=\"formPro.paytype\" @change=\"paytypeChange\">\n                            <el-radio label=\"微信Native支付\"></el-radio>\n                            <el-radio label=\"微信JSAPI支付\"></el-radio>\n                            <el-radio label=\"支付宝应用\"></el-radio>\n                        </el-radio-group>\n        </el-form-item>\n       <div v-if=\"formPro.paytype!='支付宝应用'\">\n            <el-form-item label=\"服务商模式\">\n                         <el-radio-group v-model=\"formPro.serviceType\">\n                            <el-radio label=\"是\"></el-radio>\n                            <el-radio label=\"否\"></el-radio>\n                        </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"APP_ID\" prop=\"sp_app_id\" v-if=\"formPro.serviceType=='是'\">\n          <el-input v-model=\"formPro.sp_app_id\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"SUB_APP_ID\" prop=\"sub_app_id\">\n          <el-input v-model=\"formPro.sub_app_id\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"MCH_ID\" prop=\"sp_mch_id\" v-if=\"formPro.serviceType=='是'\">\n          <el-input v-model=\"formPro.sp_mch_id\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"SUB_MCH_ID\" prop=\"sub_mch_id\">\n          <el-input v-model=\"formPro.sub_mch_id\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"证书序列号\" prop=\"serial_no\" v-if=\"formPro.paytype=='微信JSAPI支付'\" >\n          <el-input v-model=\"formPro.serial_no\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"API-V3-KEY\" prop=\"api_v3_key\" v-if=\"formPro.paytype=='微信JSAPI支付'\">\n          <el-input v-model=\"formPro.api_v3_key\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"APP_SECRET\" prop=\"app_secret\"  v-if=\"formPro.paytype=='微信Native支付'\">\n          <el-input v-model=\"formPro.app_secret\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"KEY\" prop=\"key\"  v-if=\"formPro.paytype=='微信Native支付'\">\n          <el-input v-model=\"formPro.key\"></el-input>\n        </el-form-item>\n       </div>\n        <div v-if=\"formPro.paytype=='支付宝应用'\">\n              <el-form-item label=\"应用APP_ID\" prop=\"app_id\">\n                <el-input v-model=\"formPro.app_id\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"证书类型\">\n                         <el-radio-group v-model=\"formPro.aliPemType\">\n                            <el-radio label=\"RSA2\"></el-radio>\n                            <el-radio label=\"RSA\"></el-radio>\n                        </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"秘钥格式\">\n                         <el-radio-group v-model=\"formPro.aliKeyType\">\n                            <el-radio label=\"PKCS8(JAVA适用)\"></el-radio>\n                            <el-radio label=\"PKCS1(非JAVA适用)\"></el-radio>\n                        </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"应用公钥\" prop=\"aliPublicKey\">\n                <el-input v-model=\"formPro.aliPublicKey\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"应用私钥\" prop=\"aliPrivateKey\">\n                <el-input v-model=\"formPro.aliPrivateKey\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"支付宝公钥\" prop=\"aliCommonPublicKey\">\n                <el-input v-model=\"formPro.aliCommonPublicKey\"></el-input>\n            </el-form-item>\n        </div>\n        <el-form-item prop=\"id\" hidden>\n          <el-input v-model=\"formPro.id\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"resetFormPro\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"submitFormPro\">确 定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { onMounted, reactive, toRefs, ref, unref } from \"vue\";\nimport { ElMessageBox, ElMessage } from \"element-plus\";\nimport Table from \"@/components/Table\";\nimport { saveCollection, listCollection } from \"../api/serviceApi\";\nexport default {\n  //   data() {\n  //     return {\n  //       dialogFormVisible: false,\n  //       activeName: \"first\",\n  //     };\n  //   },\n\n  methods: {\n      paytypeChange(val){\n          console.log(val)\n      }\n    // handleClick(tab, event) {\n    //   console.log(tab, event);\n    // }\n  },\n  components: {\n    Table\n  },\n  setup() {\n    const dialogFormVisible = ref(false);\n    const dialogFormVisiblePro = ref(false);\n    const activeName = ref(\"first\");\n    const formRef = ref(null);\n    const formRefPro= ref(null);\n    const form = reactive({\n      code: \"\",\n      company: \"\",\n      id: 0\n    });\n    const formPro = reactive({\n        paytype:'微信Native支付',\n      app_id: \"\",\n      sub_app_id: \"\",\n      aliPemType:'RSA2',\naliKeyType:'PKCS8(JAVA适用)',\nserviceType:'是',\n      id: 0\n    });\n    const rules = {\n      code: [\n        { required: true, message: \"请输入收款主体公司编码\", trigger: \"blur\" },\n        { min: 3, max: 50, message: \"长度在 3 到 5 个字符\", trigger: \"blur\" }\n      ],\n      company: [\n        { required: true, message: \"请输入收款主体公司名称\", trigger: \"blur\" },\n        { min: 3, max: 50, message: \"长度在 3 到 50 个字符\", trigger: \"blur\" }\n      ]\n    };\n    const rulesPro = {\n      code: [\n        { required: true, message: \"请输入收款主体公司编码\", trigger: \"blur\" },\n        { min: 3, max: 50, message: \"长度在 3 到 5 个字符\", trigger: \"blur\" }\n      ],\n      company: [\n        { required: true, message: \"请输入收款主体公司名称\", trigger: \"blur\" },\n        { min: 3, max: 50, message: \"长度在 3 到 50 个字符\", trigger: \"blur\" }\n      ]\n    };\n    const resetForm = () => {\n      dialogFormVisible.value = false;\n      //  formRes.value.resetFields();\n    };\n    const resetFormPro = () => {\n      dialogFormVisiblePro.value = false;\n    };\n    const submitFormPro=async()=>{\n\n    }\n    const submitForm = async () => {\n      const vform = unref(formRef);\n      if (!vform) return;\n      try {\n        await vform.validate();\n        // const { code, name } = form\n        saveCollection(form)\n          .then(res => {\n            if (res.code == 200) {\n              //  ElMessageBox.alert(res.msg)\n              ElMessage.success({\n                message: \"保存成功\",\n                type: \"success\"\n              });\n              dialogFormVisible.value = false;\n              var t;\n              clearTimeout(t);\n              t = setTimeout(function() {\n                state.data.tableData = \"\";\n                state.data.currentPage = 1;\n                state.data.pageSize = 10;\n                state.data.total = 0;\n                getDataList();\n              }, 2000);\n            } else {\n              ElMessageBox.alert(res.msg);\n              return false;\n            }\n          })\n          .catch(e => {\n            ElMessageBox.alert(e);\n            return false;\n          });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const openDialog = () => {\n      state.dialogTitle = \"新增收款主体\";\n      (form.code = \"\"), (form.company = \"\"), (dialogFormVisible.value = true);\n    };\n     const openProDialog = () => {\n      state.dialogTitlePro = \"新增支付产品\";\n      (form.code = \"\"), (form.company = \"\"), (dialogFormVisiblePro.value = true);\n    };\n    const edit = params => {\n      state.dialogTitle = \"编辑收款主体\";\n      form.id = params.id;\n      form.code = params.code;\n      form.company = params.company;\n      dialogFormVisible.value = true;\n    };\n    const state = reactive({\n      keyword: \"\",\n      loading: true,\n      typeVal: \"\",\n      types: [],\n      data: {\n        tableTitle: [\n          { prop: \"id\", label: \"ID\" },\n          { prop: \"code\", label: \"收款主体公司编码\" },\n          { prop: \"company\", label: \"收款主体公司名称\" },\n          { prop: \"updatetime\", label: \"创建时间\" },\n          { prop: \"birthday\", label: \"微信收款产品\" },\n          { prop: \"sex\", label: \"支付宝收款产品\" },\n          { prop: \"status_text\", label: \"收款主体状态\" }\n        ],\n        tableData: [],\n        currentPage: 1,\n        pageSize: 10,\n        total: \"\"\n      },\n      operation: {\n        flag: true,\n        edit: true,\n        del: true,\n        isuser: false\n      },\n      dialogTitle: \"新增收款主体\",\n      dialogTitlePro: \"新增支付产品\"\n    });\n    onMounted(() => {\n      state.types = [\n        { value: \"1\", label: \"黄金糕\" },\n        { value: \"2\", label: \"双皮奶\" }\n      ];\n      init();\n      state.loading = false;\n    });\n\n    let typeVal = state.typeVal;\n    if (typeVal == null || typeVal == 0) {\n      typeVal = null;\n    }\n    // 初始化数据\n    const init = () => {\n      let keyword = state.keyword;\n      if (keyword == null || keyword == \"\") {\n        keyword = null;\n      }\n      getDataList();\n    };\n    const getDataList = () => {\n      listCollection().then(res => {\n        res.data.list.forEach(function(item) {\n          if (item.status == 1) {\n            item.status_text = \"启用\";\n          } else {\n            item.status_text = \"停用\";\n          }\n        });\n        state.data.tableData = res.data.list;\n        state.data.currentPage = res.data.page;\n        state.data.pageSize = res.data.size;\n        state.data.total = res.data.total;\n      });\n\n      \n    };\n    return {\n      ...toRefs(state),\n      init,\n      submitForm,\n      form,\n      rules,\n      edit,\n      formRef,\n      resetForm,\n      activeName,\n      dialogFormVisible,\n      openDialog,\n      openProDialog,\n      formPro,\n      formRefPro,\n      dialogFormVisiblePro,\n      rulesPro,\n      resetFormPro,\n      submitFormPro\n    };\n  }\n};\n</script>\n\n<style lang=\"less\">\n@import \"../common/style/common\";\n\n.goods-list {\n  .content-main {\n    .table-image {\n      width: 45px;\n      height: 45px;\n    }\n  }\n}\n</style>"]}]}