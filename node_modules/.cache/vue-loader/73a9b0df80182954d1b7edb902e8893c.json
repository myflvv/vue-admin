{"remainingRequest":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsList.vue?vue&type=style&index=0&id=f867836c&lang=less","dependencies":[{"path":"/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsList.vue","mtime":1615425433750},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/css-loader/dist/cjs.js","mtime":1614068612826},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1614935255022},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/postcss-loader/src/index.js","mtime":1589968283242},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/less-loader/dist/cjs.js","mtime":1615423661887},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/cache-loader/dist/cjs.js","mtime":1589968278364},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js","mtime":1614935255022}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBAaW1wb3J0ICcuLi9jb21tb24vc3R5bGUvY29tbW9uJzsKCiAgICAuZ29vZHMtbGlzdCB7CiAgICAgICAgLmNvbnRlbnQtbWFpbnsKICAgICAgICAgICAgLnRhYmxlLWltYWdlewogICAgICAgICAgICAgICAgd2lkdGg6IDQ1cHg7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDQ1cHg7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsList.vue"],"names":[],"mappings":";IAiNI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEhC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAChB;QACJ;IACJ","file":"/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsList.vue","sourceRoot":"","sourcesContent":["<template>\n    <div class=\"goods-list\">\n        <el-card shadow=\"never\">\n            <template #header>\n                <div class=\"clearfix\">\n                    <el-image class=\"icon\" :src=\"require('@/assets/image/icon/list.png')\"/>\n                    <span>商品列表</span>\n                </div>\n            </template>\n            <div class=\"content\">\n                <div class=\"content-header\">\n                    <el-row :gutter=\"20\">\n                        <el-col :span=\"4\">\n                            <el-input v-model=\"keyword\" placeholder=\"请输入商品信息\"></el-input>\n                        </el-col>\n                        <el-col :span=\"4\">\n                            <el-select v-model=\"typeVal\" filterable placeholder=\"请选择\">\n                                <el-option v-for=\"item in types\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"/>\n                            </el-select>\n                        </el-col>\n                        <el-col :span=\"4\">\n                            <el-button type=\"danger\" @click=\"init\">搜索</el-button>\n                            <el-button type=\"primary\" @click=\"addGoodsInfo\">发布商品</el-button>\n                        </el-col>\n                    </el-row>\n                </div>\n                <div class=\"content-main\">\n                    <el-table :data=\"tableData\" border stripe style=\"width: 100%; margin: 1em 0\"\n                              v-loading=\"loading\"\n                              element-loading-text=\"拼命加载中...\"\n                              element-loading-spinner=\"el-icon-loading\"\n                              element-loading-background=\"rgba(0, 0, 0, 0.8)\">\n                        <el-table-column prop=\"goodsId\" label=\"商品ID\" align=\"center\" show-overflow-tooltip/>\n                        <el-table-column prop=\"goodsName\" label=\"商品名称\" align=\"center\" show-overflow-tooltip/>\n                        <el-table-column label=\"商品主图\" align=\"center\">\n                            <template #default=\"scope\">\n                                <el-image class=\"table-image\" :src=\"scope.row.coverImg\"/>\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"stock\" label=\"库存\" align=\"center\" show-overflow-tooltip/>\n                        <el-table-column label=\"价格\" align=\"center\" show-overflow-tooltip>\n                            <template #default=\"scope\">\n                                <span>￥{{scope.row.goodsPrice}}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"categoryName\" label=\"分类\" align=\"center\" show-overflow-tooltip/>\n                        <el-table-column prop=\"status\" label=\"状态\" align=\"center\" show-overflow-tooltip>\n                            <template #default=\"scope\">\n                                <span>{{scope.row.status == 1 ? '上架':'下架'}}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"updateTime\" label=\"更新时间\" align=\"center\" show-overflow-tooltip/>\n                        <el-table-column label=\"操作\" align=\"center\" width=\"210\">\n                            <template #default=\"scope\">\n                                <el-button size=\"small\"  @click=\"qryGoodsInfo(scope.row.goodsId)\">查看</el-button>\n                                <el-button type=\"success\" size=\"small\"  v-if=\"scope.row.status == 1\" @click=\"updGoodsStatus(scope.row.goodsId,scope.row.status)\">上架</el-button>\n                                <el-button type=\"info\" size=\"small\"  v-if=\"scope.row.status == 0\" @click=\"updGoodsStatus(scope.row.goodsId,scope.row.status)\">下架</el-button>\n                                <el-button type=\"primary\" size=\"small\"  @click=\"updGoodsInfo(scope.row.goodsId)\">编辑</el-button>\n                                <el-button type=\"danger\" size=\"small\"  @click=\"delGoodsInfo(scope.row.goodsId)\">删除</el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                    <el-pagination @size-change=\"sizeChange\" @current-change=\"currentChange\"\n                                   layout=\"total, sizes, prev, pager, next, jumper\"\n                                   :current-page=\"currentPage\"\n                                   :page-sizes=\"pageSizes\"\n                                   :page-size=\"pageSize\"\n                                   :total=\"total\"/>\n                </div>\n            </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import {onMounted, reactive, toRefs} from 'vue'\n    import {useRouter} from 'vue-router'\n    import {ElMessageBox, ElNotification} from 'element-plus'\n\n    export default {\n        setup() {\n            const router = useRouter()\n            const state = reactive({\n                keyword: '',\n                types: [],\n                typeVal: '',\n                loading: true,\n                tableData: [],\n                currentPage: 1,\n                pageSizes: [10, 20, 50, 100],\n                pageSize: 10,\n                total: 100,\n            })\n\n            onMounted(() => {\n                state.types = [\n                    {value: '1', label: '黄金糕'},\n                    {value: '2', label: '双皮奶'}\n                ]\n                init()\n            })\n\n            // 初始化数据\n            const init = () =>{\n                let keyword = state.keyword\n                if(keyword == null || keyword == ''){\n                    keyword = null\n                }\n\n                let typeVal = state.typeVal\n                if(typeVal == null || typeVal == 0){\n                    typeVal = null\n                }\n                console.log(\"keyword:\"+keyword+\",typeVal:\"+typeVal)\n                console.log(\"currentPage:\"+state.currentPage+\",pageSize:\"+state.pageSize)\n                state.tableData = [\n                    {goodsId: '10001', goodsName: '饼干-案件韩国大受打击会是大分公司丢案发把速度告发送', coverImg: require('@/assets/image/logo.png'),stock:'1000',goodsPrice:'12.58',categoryName:'食品',status:'1',updateTime:'2016-05-02 12:20:21'},\n                    {goodsId: '10001', goodsName: '饼干', coverImg: require('@/assets/image/logo.png'),stock:'1000',goodsPrice:'12.58',categoryName:'食品',status:'0',updateTime:'2016-05-02 12:20:21'},\n                ]\n\n                state.loading = false\n            }\n\n            // 详情\n            const qryGoodsInfo = (goodsId) =>{\n                router.push({ path: 'goods-add', query:{goodsId: goodsId, type: 'query'}})\n                console.log(goodsId)\n            }\n\n            // 添加\n            const addGoodsInfo = () =>{\n                router.push({ path: 'goods-add', query:{type: 'add'}})\n            }\n\n            // 删除\n            const delGoodsInfo = (goodsId) =>{\n                ElMessageBox.confirm('此操作将永久删除该条数据, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning',\n                    callback: action =>{\n                        if('confirm' == action){\n                            console.log(\"提交：\"+goodsId)\n                            init()\n                            ElNotification({\n                                title: '成功',\n                                message: '删除成功！',\n                                duration: 2000,\n                                type: 'success'\n                            })\n                        }\n                    }\n                })\n            }\n            // 上下架\n            const updGoodsStatus = (goodsId,status) =>{\n                let msg = \"上架\"\n                if(status == 1){\n                    msg = \"下架\"\n                }\n                ElMessageBox.confirm('您是否要'+msg+'此商品, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning',\n                    callback: action =>{\n                        if('confirm' == action){\n                            console.log(\"提交：\"+goodsId +\"=======\"+ status)\n                            init()\n                            ElNotification({\n                                title: '成功',\n                                message: '操作成功！',\n                                duration: 2000,\n                                type: 'success'\n                            })\n                        }\n                    }\n                })\n            }\n\n            // 编辑\n            const updGoodsInfo = (goodsId) =>{\n                router.push({ path: 'goods-add', query:{goodsId: goodsId, type: 'edit'}})\n                console.log(goodsId)\n            }\n\n            const sizeChange = (val) => {\n                state.pageSize = val\n            }\n\n            const currentChange = (val) => {\n                state.currentPage = val\n            }\n\n            return {\n                ...toRefs(state),\n                init,\n                qryGoodsInfo,\n                addGoodsInfo,\n                delGoodsInfo,\n                updGoodsStatus,\n                updGoodsInfo,\n                sizeChange,\n                currentChange\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    @import '../common/style/common';\n\n    .goods-list {\n        .content-main{\n            .table-image{\n                width: 45px;\n                height: 45px;\n            }\n        }\n    }\n</style>"]}]}