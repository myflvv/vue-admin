{"remainingRequest":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsAdd.vue?vue&type=style&index=0&id=7b130625&lang=less","dependencies":[{"path":"/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsAdd.vue","mtime":1615423561118},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/css-loader/dist/cjs.js","mtime":1614068612826},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1614935255022},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/postcss-loader/src/index.js","mtime":1589968283242},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/less-loader/dist/cjs.js","mtime":1615423661887},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/cache-loader/dist/cjs.js","mtime":1589968278364},{"path":"/home/nothing/data/vue/mall-vue3-manage/node_modules/vue-loader-v16/dist/index.js","mtime":1614935255022}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICAuZ29vZHMtYWRkIHsKICAgICAgICBwYWRkaW5nLWJvdHRvbTogNGVtOwoKICAgICAgICAuaW5wdXQtc2l6ZSB7CiAgICAgICAgICAgIHdpZHRoOiA0MGVtOwogICAgICAgIH0KCiAgICAgICAgLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkIHsKICAgICAgICAgICAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgfQoKICAgICAgICAuYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQ6aG92ZXIgewogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0MDlFRkY7CiAgICAgICAgfQoKICAgICAgICAuYXZhdGFyLXVwbG9hZGVyLWljb24gewogICAgICAgICAgICBmb250LXNpemU6IDI4cHg7CiAgICAgICAgICAgIGNvbG9yOiAjOGM5MzlkOwogICAgICAgICAgICB3aWR0aDogMTc4cHg7CiAgICAgICAgICAgIGhlaWdodDogMTc4cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxNzhweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIH0KCiAgICAgICAgLmF2YXRhciB7CiAgICAgICAgICAgIHdpZHRoOiAxNzhweDsKICAgICAgICAgICAgaGVpZ2h0OiAxNzhweDsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQogICAgfQo="},{"version":3,"sources":["/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsAdd.vue"],"names":[],"mappings":";IAoNI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;QAEnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACf;;QAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpB;;QAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzB;;QAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtB;;QAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACJ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAClB;IACJ","file":"/home/nothing/data/vue/mall-vue3-manage/src/views/GoodsAdd.vue","sourceRoot":"","sourcesContent":["<template>\n    <div class=\"goods-add\">\n        <el-card shadow=\"never\">\n            <template #header>\n                <el-page-header @back=\"goBack\" content=\"商品详情\"></el-page-header>\n            </template>\n            <div class=\"content\">\n                <el-form :model=\"goodsForm\" :rules=\"rules\" ref=\"validateForm\" label-width=\"100px\">\n                    <el-form-item label=\"商品名称\" prop=\"goodsName\">\n                        <el-input class=\"input-size\" v-model=\"goodsForm.goodsName\" maxlength=\"20\" minlength=\"4\"\n                                  autocomplete=\"off\"\n                                  placeholder=\"请输入\"/>\n                    </el-form-item>\n                    <el-form-item label=\"商品分类\" prop=\"categoryId\">\n                        <el-select class=\"input-size\" v-model=\"goodsForm.categoryId\" filterable placeholder=\"请选择\">\n                            <el-option v-for=\"(category,c) in categorys\" :key=\"c\"\n                                       :label=\"category.label\"\n                                       :value=\"category.value\"/>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"商品简介\" prop=\"goodsIntro\">\n                        <el-input class=\"input-size\" type=\"textarea\" v-model=\"goodsForm.goodsIntro\"\n                                  :autosize=\"{minRows: 2, maxRows: 4}\"\n                                  maxlength=\"180\" show-word-limit\n                                  placeholder=\"请输入内容\"/>\n                    </el-form-item>\n                    <el-form-item label=\"商品价格\" prop=\"goodsPrice\">\n                        <el-input-number v-model=\"goodsForm.goodsPrice\" controls-position=\"right\"\n                                         :precision=\"2\"\n                                         :step=\"0.01\"\n                                         :min=\"0.01\"\n                                         :max=\"100000\"/>\n                    </el-form-item>\n                    <el-form-item label=\"市场价\" prop=\"marketPrice\">\n                        <el-input-number v-model=\"goodsForm.marketPrice\" controls-position=\"right\"\n                                         :precision=\"2\"\n                                         :step=\"0.01\"\n                                         :min=\"0.01\"\n                                         :max=\"100000\"/>\n                    </el-form-item>\n                    <el-form-item label=\"库存\" prop=\"stock\">\n                        <el-input-number v-model=\"goodsForm.stock\" controls-position=\"right\"\n                                         :min=\"1\"\n                                         :max=\"100000\"/>\n                    </el-form-item>\n                    <el-form-item label=\"商品主图\" prop=\"coverImg\">\n                        <el-upload class=\"avatar-uploader\" :action=\"uploadAction\"\n                                   :on-success=\"coverImgSuccess\"\n                                   :show-file-list=\"false\"\n                                   :auto-upload=\"false\">\n                            <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n                            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                        </el-upload>\n                    </el-form-item>\n                    <el-form-item label=\"商品轮播图\" prop=\"carouselImg\">\n                        <el-upload :action=\"uploadAction\" list-type=\"picture-card\" :auto-upload=\"false\" :limit=\"10\">\n                            <template #default>\n                                <i class=\"el-icon-plus\"></i>\n                            </template>\n                            <template #file=\"{file}\">\n                                <div>\n                                    <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\"/>\n                                    <span class=\"el-upload-list__item-actions\">\n                                      <span class=\"el-upload-list__item-preview\" @click=\"qryImage(file)\">\n                                        <i class=\"el-icon-zoom-in\"></i>\n                                      </span>\n                                      <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\"\n                                            @click=\"delImage(file)\">\n                                        <i class=\"el-icon-delete\"></i>\n                                      </span>\n                                    </span>\n                                </div>\n                            </template>\n                        </el-upload>\n                    </el-form-item>\n                    <el-form-item label=\"商品详情\" prop=\"goodsDetail\">\n                        <WangEditor></WangEditor>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"danger\" @click=\"submitForm\">立即发布</el-button>\n                        <el-button @click=\"resetForm\">重置</el-button>\n                    </el-form-item>\n                </el-form>\n                <el-dialog v-model=\"dialogVisible\">\n                    <el-image width=\"100%\" :src=\"imageItemUrl\"/>\n                </el-dialog>\n            </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import {onMounted, reactive, ref, toRefs, unref} from 'vue'\n    import {useRouter} from 'vue-router'\n    import WangEditor from \"@/components/WangEditor\"\n\n    export default {\n        components:{\n            WangEditor\n        },\n        setup() {\n            const router = useRouter()\n            const validateForm = ref(null)\n            const state = reactive({\n                uploadAction: '#',\n                imageUrl: '',\n                imageItemUrl: '',\n                dialogVisible: false,\n                disabled: false,\n                goodsForm: {\n                    goodsName: '', // 名称\n                    goodsIntro: '', // 描述\n                    categoryId: '', // 分类id\n                    goodsPrice: '', // 价格\n                    marketPrice: '', // 市场价\n                    stock: '', // 库存\n                    coverImg: '', // 主图\n                    carouselImg: '', // 轮播图\n                    goodsDetail: '', // 详情\n                },\n                categorys: [],\n            })\n\n            const rules = {\n                goodsName: [\n                    {required: true, message: '请输入商品名称', trigger: 'blur'},\n                ],\n                goodsIntro: [\n                    {required: true, message: '请输入商品描述', trigger: 'blur'},\n                ],\n                categoryId: [\n                    {required: true, message: '请输入选择分类', trigger: 'blur'},\n                ],\n                goodsPrice: [\n                    {required: true, message: '请输入商品价格', trigger: 'blur'},\n                ],\n                marketPrice: [\n                    {required: true, message: '请输入市场价', trigger: 'blur'},\n                ],\n                stock: [\n                    {required: true, message: '请输入库存', trigger: 'blur'},\n                ],\n                coverImg: [\n                    {required: true, message: '请上传商品主图', trigger: 'blur'},\n                ],\n                carouselImg: [\n                    {required: true, message: '请上传轮播图，至少一张', trigger: 'blur'},\n                ],\n                goodsDetail: [\n                    {required: true, message: '请输入商品详情', trigger: 'blur'},\n                ]\n            }\n\n            onMounted(async () => {\n                state.categorys = [\n                    {label: '生鲜', value: '1'},\n                    {label: '蔬菜', value: '2'},\n                    {label: '水果', value: '3'},\n                    {label: '日用', value: '4'},\n                ]\n            })\n\n            const submitForm = async () => {\n                const form = unref(validateForm)\n                if (!form) {\n                    return\n                }\n                await form.validate()\n\n                console.log(state.goodsForm)\n            }\n\n            const resetForm = () => {\n                const form = unref(validateForm)\n                form.resetFields()\n            }\n\n            const goBack = () => {\n                router.go(-1)\n            }\n\n            const coverImgSuccess = (res, file) => {\n                state.imageUrl = URL.createObjectURL(file.raw);\n            }\n\n            // 查看大图\n            const qryImage = (file) => {\n                state.imageItemUrl = file.url\n                state.dialogVisible = true\n            }\n\n            // 删除图片\n            const delImage = (file) => {\n                console.log(\"删除图片\" + file)\n            }\n\n            return {\n                ...toRefs(state),\n                goBack,\n                validateForm,\n                rules,\n                submitForm,\n                resetForm,\n                coverImgSuccess,\n                qryImage,\n                delImage,\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    .goods-add {\n        padding-bottom: 4em;\n\n        .input-size {\n            width: 40em;\n        }\n\n        .avatar-uploader .el-upload {\n            border: 1px dashed #d9d9d9;\n            border-radius: 6px;\n            cursor: pointer;\n            position: relative;\n            overflow: hidden;\n        }\n\n        .avatar-uploader .el-upload:hover {\n            border-color: #409EFF;\n        }\n\n        .avatar-uploader-icon {\n            font-size: 28px;\n            color: #8c939d;\n            width: 178px;\n            height: 178px;\n            line-height: 178px;\n            text-align: center;\n        }\n\n        .avatar {\n            width: 178px;\n            height: 178px;\n            display: block;\n        }\n    }\n</style>"]}]}